1. 画面全体レイアウト（スマホ縦）

1.1 基本構造

縦方向に 3 レイヤー構成：
	1.	スライドビューワー（上部固定）
	•	画面上部いっぱいの横幅
	•	アスペクト比 16:9（or スライドに合わせて変動）
	•	縦スクロールに追従して「ページだけが切り替わる」イメージで、
ビューワ自体はスクロールしない（常に画面上に見えている）
	2.	字幕コンポーネント（中央〜下）
	•	ビューワのすぐ下から、コントロールバーの上までを占有
	•	縦スクロール可能なリスト
	•	各行（チャンク）が「1スライド or 1セクション」に紐づく
	3.	コントロールバー（下部固定）
	•	画面最下部に固定
	•	再生/一時停止ボタン＋速度変更＋ちょっとした進捗バー程度
	•	片手親指で押しやすいサイズ

⸻

2. 「字幕とスライドのガチ同期」仕様

字幕コンポーネント内最上部の字幕とビューワーが表示するページは必ず一致する
ビューワー、字幕コンポーネントともに縦スクロール

ここを厳密に仕様化します。

2.1 モデルの前提
	•	各字幕チャンクに pageNumber を持たせる（1, 2, 3,…）。
	•	同じ pageNumber を持つ字幕チャンクが複数あってもよい（そのスライドの途中で段落を分けたい場合）。
	•	UI的には「字幕リストの中で、最上部に“完全に表示されている最初のチャンク”の pageNumber をアクティブページとみなす」。

2.2 字幕スクロール → スライド更新
	1.	ユーザーが字幕リストを縦スクロール。
	2.	スクロールイベント毎に「先頭に見えているチャンク」を計算。
	3.	そのチャンクの pageNumber を activePage とする。
	4.	スライドビューワーは activePage が変わった瞬間に、そのページにアニメーション付きで切り替え。
	•	切り替えは 150〜250ms 程度のスライド or フェード。
	•	ページ数が連続して変わる場合は、「追いつき表現（最後の1回だけアニメ）」にして、負荷とチラつきを軽減。

これで「字幕の最上部とビューワーのページは常に一致」が実現できます。

2.3 スライド操作 → 字幕スクロール更新

スライド側の操作でも字幕が追従するようにします。

A. スワイプ or タップでページ送り
	•	ユーザーが左右スワイプ or 端タップで pageNumber を変更したとき：
	1.	activePage を変更。
	2.	字幕リスト側で「その pageNumber の最初のチャンク」を探す。
	3.	そのチャンクが「リストの一番上」に来るようにスムーズスクロール（300msくらい）。

B. シークバーからジャンプ
	•	コントロールバーのシークバー操作で、
音声の位置 → その時点で喋っている pageNumber に飛ぶ場合も同様に、字幕をスクロールさせる。

2.4 どちらが「主導」か
	•	スクロールの主導権は 字幕側 に置くとよいです。
	•	理由：
	•	「読む」体験がメイン
	•	スライドは「視覚的な補助」のためのもの
	•	スライド操作は「例外的にアクティブページを変える動き」として扱い、
字幕リストを追従スクロールさせる形にする。

⸻

3. 字幕コンポーネントの詳細仕様

3.1 行（チャンク）のレイアウト

1行あたり、ざっくりこんな感じ：
	•	左端：スライドのミニサムネ
	•	正方形 or 3:2
	•	サイズは行高の 0.6〜0.8 くらいの小さめ
	•	今の activePage と同じ pageNumber の場合、縁を少し強調（太枠 or ハイライト）
	•	右側：テキスト
	•	2〜3行で収まるように適度に分割（チャンク単位）
	•	フォントは Zenn / note くらいの可読性重視サイズ
	•	現在再生中のチャンクは背景色 or 左の縦線でハイライト

例：

[小さいサムネ][このスライドで話している内容の字幕テキスト……]

3.2 操作
	•	縦スクロール
	•	通常のスクロールリストとして動作。
	•	スクロール中はスライドだけがスナップして切り替わる。
	•	チャンクをタップ
	•	そのチャンクの pageNumber にジャンプ。
	•	音声がある場合：
	•	デフォルト：そのチャンクの先頭タイムスタンプにシークして再生 or 一時停止状態で待機（どちらか設計次第）。
	•	スクロールも行い、そのチャンクが先頭にくるように少しだけスクロール。
	•	サムネ部分をタップ
	•	同様にページジャンプ。
	•	わかりやすく「サムネを押すとそのスライドに飛ぶ」感覚。

3.3 テキストモード（拡張案）
	•	字幕エリアをフルスクリーンにする「テキストモード」ボタンを、字幕エリア右上に配置。
	•	テキストモード中も、行の pageNumber 情報は持っているので：
	•	タップすると上記と同じようにスライド＆音声も同期可能（ただしスライドは小さくピクチャインピクチャ的に表示 or 上部に縮小表示）。
	•	長文を一気に読みたい時用。

⸻

4. スライドビューワーの詳細仕様

4.1 操作（片手操作を優先）
	•	左右スワイプ：ページ送り
	•	左右端タップ：
	•	右端タップ：次のページ
	•	左端タップ：前のページ
	•	ダブルタップ：
	•	ズームイン/ズームアウト切り替え
	•	ピンチイン/アウト：
	•	ズーム（図やコードを拡大したいとき）

4.2 ページ番号・インジケータ
	•	スライド右上 or 左下あたりに
	•	現在ページ / 総ページ を表示
	•	タップすると、オーバービュー（サムネ一覧）モードに切り替え…は v2 以降でOK。

⸻

5. 再生コントロール（音声との同期）

5.1 コントロールバー構成
	•	中央：大きな再生 / 一時停止ボタン（親指で押しやすい）
	•	左：現在の再生時間（mm:ss）
	•	右：総時間（mm:ss）
	•	その上に細いプログレスバー（ドラッグ可能）
	•	追加ボタンとして：
	•	再生速度切替（1.0x / 1.25x / 1.5x / 2.0）
	•	ミュート

5.2 字幕との同期ルール
	•	再生中は、タイムラインに応じて「今の発話が属するチャンク」を特定し、そのチャンクをハイライト。
	•	ハイライト対象のチャンクが画面外なら、ゆっくり追従スクロール：
	•	ユーザーが手動でスクロールしている間は、強制スクロールはしない or かなり控えめにする（手動優先）。
	•	再生が止まった位置で pageNumber が変わっていれば、スライド側のページも切り替える。

⸻

6. 状態・エラー・ローディング

6.1 ローディング
	•	スライドが読み込み中：
	•	スライドエリアにスケルトン（グレーの枠）
	•	字幕が読み込み中：
	•	リストにスケルトン行を複数並べる
	•	音声読み込み中：
	•	再生ボタンをスケルトン or ローディングインジケータにする

6.2 エラー
	•	音声が存在しない or 読み込み失敗の場合：
	•	再生ボタンを「音声なし」アイコンに切り替え
	•	字幕だけで完結する前提なので、致命傷にはしない

⸻

7. さらに詰めた「細かい仕様」ポイント

7.1 字幕チャンクの分割ルール（UX寄り）
	•	1チャンクは 2〜4行くらいに収まる長さにする（スマホで「ひとまとまり」と感じるサイズ）。
	•	チャンクの区切りは：
	•	スライドの切り替わり
	•	文の句点（。）
	•	大きめのポーズ（0.7秒以上とか）
	•	これをサーバ側 or 生成処理側で頑張っておくと、UIがかなり扱いやすくなる。

7.2 アニメーション
	•	字幕のハイライト切り替え：フェードイン/アウト 150ms 程度
	•	スライドページ切り替え：横スライド or フェード 200ms
	•	コントロールバー表示/非表示（フルスクリーン時）：
上下からのスライドイン/アウト 200ms

7.3 アクセシビリティ
	•	システムのフォントサイズに追従（少なくとも「標準〜一段階大きい」くらいまではデザイン破綻しないように）。
	•	コントロールバーのタップ領域は 44px 四方以上 を目標。
	•	色覚バリアフリーを意識して、ハイライトは「色＋太線 or 下線」など複数手段で示す。