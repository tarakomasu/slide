# スライド＋音声（字幕）共有プラットフォーム 要件定義書 (Draft)

## 1. プロダクトコンセプト
**「Zennのような一覧性と、LT（ライトニングトーク）のような臨場感を併せ持つ技術共有プラットフォーム」**

* **Core Value:**
    * **投稿者:** ブログを書くのは手間だが、喋るだけなら楽。スライド＋音声入力でコンテンツが完成する。
    * **閲覧者:** 動画を見るのは時間が拘束されるが、字幕付きスライドなら自分のペースで「読む」ことができる。

## 2. ターゲットユーザー
* **投稿者 (Creator):** エンジニア、デザイナー、PMなどの技術発信者。登壇資料の再利用や、社内勉強会の共有を効率化したい層。
* **閲覧者 (Viewer):** 最新技術やノウハウを効率よくインプットしたい層。動画を見る時間はないが、スライドの行間（文脈）は知りたい層。

## 3. ユーザー体験 (UX) の設計

### 3.1 投稿・作成フロー
1.  **スライドアップロード:** PDFまたは画像形式でアップロード。
2.  **音声吹き込み:**
    *. 通しで録音。
    * 「ブログを書く」のではなく「説明を喋る」体験。
3.  **AI処理 (バックグラウンド):**
    * 音声の文字起こし。
    * スライド内容を参照した誤字脱字の補正・整形。
    * 音声からスライドへのページ割り振り。
4.  **確認・公開:** 生成されたテキストをざっと確認して公開。

### 3.2 閲覧・再生フロー
1.  **フィード:** Zennのようなシンプルで軽量なリスト表示。動くサムネイル等で興味を惹く。
2.  **詳細ページ (Player):**
    * **デフォルト:** 音声ミュート。スライドと同期した「字幕（テキスト）」が表示される。
    * **操作:** スライドをめくるとテキストも該当箇所に飛ぶ（Sync）。
    * **詳細理解:** 興味がある箇所だけ音声を再生したり、記事のようにテキストを読み進めることが可能。

## 4. 技術戦略とAI活用

### 4.1 AI文字起こし・校正パイプライン
安価かつ高精度な「2段階構成」を採用する。

* **Step 1: 文字起こし (Speech-to-Text)**
    * **技術:** OpenAI Whisper API
    * **役割:** 音声をテキストデータ化する。
    * **工夫:** スライド内の単語をOCRで抽出し、Whisperへのプロンプト（辞書）として渡すことで専門用語の認識精度を上げる。
* **Step 2: 校正・整形 (LLM + Vision)**
    * **技術:** GPT-4o-mini または Gemini 1.5 Flash
    * **役割:** スライド画像と文字起こしテキストを突き合わせ、誤字修正・読みやすい文章への整形、録音からスライドへのページ割り振りを行う。

### 4.2 コスト試算 (目安)
10分間のプレゼンテーション（スライド10枚程度）を処理する場合：
* **合計コスト:** 約10円以下 / 1コンテンツ
    * Whisper (10分): 約9円
    * LLM校正 (GPT-4o-mini利用): 約0.5〜1円
* **結論:** 十分にリーズナブルであり、無料枠＋広告や、少額サブスクリプションで回収可能。

## 5. 外部連携・埋め込み (Embed)

### 5.1 機能要件
他サイト（個人ブログ、Notion、Zenn等）へ、プレイヤーを埋め込めるようにする。

### 5.2 実装方式
* **iframe:** `/embed/{id}` という専用の軽量ページを用意し、iframeタグを提供する。
* **oEmbed:** URLを貼るだけでカード展開されるよう、oEmbed APIエンドポイントを実装する。

### 5.3 UI要件
* 埋め込み先（iframe内）でもスライドと字幕が見やすいレイアウトにする。
* 例：スライド下部に1〜2行の字幕をオーバーレイ、またはコンパクトなテキストエリアを配置。

6. 技術スタック (決定事項)
*   **Frontend:** Next.js (App Router), Tailwind CSS v4
*   **Backend / DB / Auth:** Supabase
*   **Storage:** Supabase Storage
*   **UI Design:** Zennライクなシンプルでミニマルなデザイン (Tailwind CSS)
*   **ライブラリ:** pdf.jsを使って自由なデザイン

## 7. MVPフェーズ1: プレイヤーUIの最適化
まずはAIパイプラインの完全自動化よりも、「スライド＋字幕」の閲覧体験（Player UI）の完成度を高めることを優先する。
*   **ゴール:** 手動またはモックデータを用いて、スライドめくりと字幕同期が心地よく動作するプレイヤーを実装する。
*   **機能:**
    *   スライド画像表示 (PDF/画像)
    *   字幕テキスト表示
    *   スライド操作と字幕の同期 (Sync)
    *   レスポンシブ対応 (PC/SP)

## 8. 今後の検討事項 (Next Steps)
1.  **AIパイプライン実装:** UIが固まった後に、Whisper + LLMの自動生成フローを接続する。
2.  **埋め込み機能:** 外部サイトへのEmbed対応。